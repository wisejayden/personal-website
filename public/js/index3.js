var stations =
{

    "U Adenauerplatz": {
        "id": "900000023302",
        "name": "Adenauerplatz"
    },
    "S Adlershof": {
        "id": "900000193002",
        "name": "Adlershof"
    },
    "S Ahrensfelde Bhf ": {
        "id": "900000170004",
        "name": "Ahrensfelde"
    },
    "S+U Alexanderplatz Bhf": {
        "id": "900000100003",
        "name": "Alexanderplatz"
    },

    "S Altglienicke": {
        "id": "900000195510",
        "name": "Altglienicke"
    },
    "S Alt-Reinickendorf": {
        "id": "900000085105",
        "name": "Alt Reinickendorf"
    },
    "S Anhalter Bahnhof": {
        "id": "900000012101",
        "name": "Anhalter Bahnhof"
    },
    "S Baumschulenweg": {
        "id": "900000191001",
        "name": "Baumschulenweg"
    },
    "S Bellevue": {
        "id": "900000003102",
        "name": "Bellevue"
    },
    "S Beusselstraße": {
        "id": "900000020202",
        "name": "Beusselstr"
    },
    "S Biesdorf": {
        "id": "900000171001",
        "name": "Biesdorf"
    },
    "U Blaschkoallee": {
        "id": "900000080201",
        "name": "Blaschkoallee"
    },
    "S Bornholmer Straße": {
        "id": "900000110011",
        "name": "Bornholmer Str"
    },
    "S Botanischer Garten": {
        "id": "900000066102",
        "name": "Botanischer Garten"
    },
    "S+U Brandenburger Tor": {
        "id": "900000100025",
        "name": "Brandenburger Tor"
    },
    "S Buckower Chaussee": {
        "id": "900000072101",
        "name": "Buckower Chaussee"
    },
    "U Bülowstraße": {
        "id": "900000056104",
        "name": "Bulowstrasse"
    },
    "S+U Bundesplatz": {
        "id": "900000044202",
        "name": "Bundesplatz"
    },
    "S Charlottenburg Bhf": {
        "id": "900000024101",
        "name": "Charlottenburg"
    },
    "U Dahlem-Dorf": {
        "id": "900000051303",
        "name": "Dahlem Dorf"
    },
    "S Eichborndamm": {
        "id": "900000096405",
        "name": "Eichborndamm"
    },
    "U Eberswalder Straße": {
        "id": "900000110006",
        "name": "Eberswalder Strasse"
    },
    "S Erkner": {
        "id": "900000310004",
        "name": "Erkner"
    },
    "S Feuerbachstraße": {
        "id": "900000063101",
        "name": "Feuerbachstrasse"
    },
    "S+U Frankfurter Allee": {
        "id": "900000120001",
        "name": "Frankfurter Allee"
    },
    "S Friedenau": {
        "id": "900000060101",
        "name": "Friedenau"
    },
    "S Friedrichsfelde Ost": {
        "id": "900000171002",
        "name": "Friedrichsfelde Ost"
    },
    "S+U Friedrichstraße": {
        "id": "900000100001",
        "name": "Friedrichstrasse"
    },
    "S Gehrenseestraße": {
        "id": "900000152002",
        "name": "Gehrenseestrasse"
    },
    "S+U Gesundbrunnen Bhf": {
        "id": "900000007102",
        "name": "Gesundbrunnen"
    },
    "U Görlitzer Bahnhof": {
        "id": "900000014101",
        "name": "Gorlitzer"
    },
    "S Greifswalder Straße": {
        "id": "900000110003",
        "name": "Greifswalder Strasse"
    },
    "S Grünau": {
        "id": "900000186001",
        "name": "Grunau"
    },
    "S Grunewald": {
        "id": "900000048101",
        "name": "Grunewald"
    },
    "S Hackescher Markt": {
        "id": "900000100002",
        "name": "Hackescher Markt"
    },
    "S Halensee": {
        "id": "900000040101",
        "name": "Halensee"
    },
    "U Hallesches Tor": {
        "id": "900000012103",
        "name": "Hallesches Tor"
    },
    "S+U Heidelberger Platz": {
        "id": "900000045102",
        "name": "Heidelberger Platz"
    },
    "S+U Berlin Hauptbahnhof": {
        "id": "900000003201",
        "name": "Hauptbahnhof"
    },
    "S Heerstraße": {
        "id": "900000026105",
        "name": "Heerstrasse"
    },
    "S Hennigsdorf": {
        "id": "900000200000",
        "name": "Hennigsdorf"
    },
    "U Hermannplatz": {
        "id": "900000078101",
        "name": "Hermannplatz"
    },
    "S+U Hermannstraße": {
        "id": "900000079221",
        "name": "Hermannstrasse"
    },
    "S Hohenschönhausen": {
        "id": "900000152001",
        "name": "Hohenschonhausen"
    },
    "S Hohenzollerndamm": {
        "id": "900000044101",
        "name": "Hohenzollerndamm"
    },
    "S Humboldthain": {
        "id": "900000008101",
        "name": "Humboldthain"
    },
    "S+U Innsbrucker Platz": {
        "id": "900000054105",
        "name": "Innsbrucker Platz"
    },
    "S+U Jannowitzbrücke": {
        "id": "900000100004",
        "name": "Jannowitzbrücke"
    },
    "S Julius-Leber-Brücke": {
        "id": "900000057104",
        "name": "Julius Leber Brucke"
    },
    "S+U Jungfernheide": {
        "id": "900000020201",
        "name": "Jungfernheide"
    },
    "S+U Karl-Bonhoeffer-Nervenklinik": {
        "id": "900000096458",
        "name": "Karl Bonhoeffer Nervenklinik"
    },
    "S Karlshorst": {
        "id": "900000162001",
        "name": "Karlshorst"
    },
    "U Klosterstraße": {
        "id": "900000100015",
        "name": "Klosterstrasse"
    },
    "U Konstanzer Straße": {
        "id": "900000041201",
        "name": "Konstanzer Strasse"
    },
    "S Köllnische Heide": {
        "id": "900000077155",
        "name": "Kollnische Heide"
    },
    "U Krumme Lanke": {
        "id": "900000050201",
        "name": "Krumme Lanke"
    },
    "S Landsberger Allee": {
        "id": "900000110004",
        "name": "Landsberger Allee"
    },
    "S Lankwitz": {
        "id": "900000067221",
        "name": "Lankwitz"
    },
    "U Leinestraße": {
        "id": "900000079201",
        "name": "Leinestrasse"
    },
    "S+U Lichtenberg Bhf": {
        "id": "900000160004",
        "name": "Lichtenberg"
    },
    "S Lichterfelde Ost Bhf ": {
        "id": "900000064301",
        "name": "Lichterfelde Ost"
    },
    "S Lichterfelde West": {
        "id": "900000066101",
        "name": "Lichterfelde West"
    },
    "S Marienfelde": {
        "id": "900000073101",
        "name": "Marienfelde"
    },
    "S Marzahn": {
        "id": "900000170001",
        "name": "Marzahn"
    },
    "S Messe Nord/ICC": {
        "id": "900000024106",
        "name": "Messe Nord/ICC"
    },
    "S Messe Süd": {
        "id": "900000025423",
        "name": "Messe Sud"
    },
    "S Mexikoplatz": {
        "id": "900000050301",
        "name": "Mexikoplatz"
    },
    "U Märkisches Museum": {
        "id": "900000100014",
        "name": "Markisches Museum"
    },
    "U Mohrenstraße": {
        "id": "900000100010",
        "name": "Mohrenstraße"
    },
    "S+U Neukölln": {
        "id": "900000078201",
        "name": "Neukolln"
    },
    "S Nikolassee": {
        "id": "900000052201",
        "name": "Nikolassee"
    },
    "S Nöldnerplatz": {
        "id": "900000160003",
        "name": "Noldnerplatz"
    },
    "S Nordbahnhof": {
        "id": "900000007104",
        "name": "Nordbahnhof"
    },
    "U Nollendorfplatz": {
        "id": "900000056102",
        "name": "Nollendorfplatz"
    },
    "U Olympia-Stadion": {
        "id": "900000025203",
        "name": "Olympiastadion"
    },
    "S Oranienburger Straße": {
        "id": "900000100007",
        "name": "Oranienburger Strasse"
    },
    "U Oranienburger Tor": {
        "id": "900000100019",
        "name": "Oranienburger Tor"
    },
    "S Osdorfer Straße": {
        "id": "900000064256",
        "name": "Osdorfer Strasse"
    },
    "S Ostbahnhof": {
        "id": "900000120005",
        "name": "Ostbahnhof"
    },
    "S Ostkreuz": {
        "id": "900000120003",
        "name": "Ostkreuz"
    },
    "U Oskar-Helene-Heim": {
        "id": "900000051301",
        "name": "Oskar Helene Heim"
    },
    "S+U Pankow": {
        "id": "900000130002",
        "name": "Pankow"
    },
    "S Pankow-Heinersdorf": {
        "id": "900000130001",
        "name": "Pankow Heinersdorf"
    },
    "S Pichelsberg": {
        "id": "900000025424",
        "name": "Pichelsberg"
    },
    "S Plänterwald": {
        "id": "900000191002",
        "name": "Planterwald"
    },
    "S Poelchaustraße": {
        "id": "900000170005",
        "name": "Poelchaustrasse"
    },
    "S+U Potsdamer Platz": {
        "id": "900000100720",
        "name": "Potsdamer Platz"
    },
    "S Prenzlauer Allee": {
        "id": "900000110002",
        "name": "Prenzlauer Allee"
    },
    "S Priesterweg": {
        "id": "900000058102",
        "name": "Priesterweg"
    },
    "U Paracelsus-Bad": {
        "id": "900000085104",
        "name": "Paracelsus Bad"
    },
    "S+U Rathaus Steglitz": {
        "id": "900000062202",
        "name": "Rathaus Steglitz"
    },
    "S+U Rathaus Spandau": {
        "id": "900000029302",
        "name": "Rathaus Spandau"
    },
    "U Rathaus Neukölln": {
        "id": "900000078102",
        "name": "Rathaus Neukolln"
    },
    "U Rathaus Schöneberg": {
        "id": "900000054101",
        "name": "Rathaus Schoneberg"
    },
    "U Rathaus Reinickendorf": {
        "id": "900000096410",
        "name": "Rathaus Reinickendorf"
    },
    "S Rummelsburg": {
        "id": "900000160001",
        "name": "Rummelsburg"
    },
    "S Betriebsbahnhof Rummelsburg": {
        "id": "900000160002",
        "name": "Betriebsbahnhof Rummelsburg"
    },
    "U Residenzstraße": {
        "id": "900000085203",
        "name": "Residenzstrasse"
    },
    "S Savignyplatz": {
        "id": "900000024203",
        "name": "Savignyplatz"
    },
    "S Schichauweg": {
        "id": "900000074202",
        "name": "Schichauweg"
    },
    "S Schlachtensee": {
        "id": "900000050355",
        "name": "Schlachtensee"
    },
    "S Schöneberg": {
        "id": "900000054104",
        "name": "Schoneberg"
    },
    "S Betriebsbahnhof Schöneweide": {
        "id": "900000193001",
        "name": "Betriebsbahnhof Schoneweide"
    },
    "S Schöneweide": {
        "id": "900000192001",
        "name": "Schoneweide"
    },
    "S+U Schönhauser Allee": {
        "id": "900000110001",
        "name": "Schonhauser Allee"
    },
    "S Schönholz": {
        "id": "900000085201",
        "name": "Schonholz"
    },
    "S Sonnenallee": {
        "id": "900000077106",
        "name": "Sonnenallee"
    },
    "S Springpfuhl": {
        "id": "900000171003",
        "name": "Springpfuhl"
    },
    "S Storkower Straße": {
        "id": "900000110012",
        "name": "Storkower Strasse"
    },
    "U Strausberger Platz": {
        "id": "900000120006",
        "name": "Strausberger Platz"
    },
    "S Stresow": {
        "id": "900000030202",
        "name": "Stresow"
    },
    "S Südende": {
        "id": "900000063452",
        "name": "Sudende"
    },
    "S Südkreuz": {
        "id": "900000058101",
        "name": "Sudkreuz"
    },
    "S Sundgauer Straße": {
        "id": "900000049202",
        "name": "Sundgauer Strasse"
    },
    "U Scharnweberstraße": {
        "id": "900000087101",
        "name": "Scharnweberstrasse"
    },
    "U Spittelmarkt": {
        "id": "900000100013",
        "name": "Spittelmarkt"
    },
    "S+U Tempelhof": {
        "id": "900000068201",
        "name": "Tempelhof"
    },
    "S Tiergarten": {
        "id": "900000003103",
        "name": "Tiergarten"
    },
    "S Treptower Park": {
        "id": "900000190001",
        "name": "Treptower Park"
    },
    "U Tierpark": {
        "id": "900000161002",
        "name": "Tierpark"
    },
    "U Uhlandstraße": {
        "id": "900000023301",
        "name": "Uhlandstrasse"
    },
    "S Wannsee": {
        "id": "900000053301",
        "name": "Wannsee"
    },
    "S+U Warschauer Straße": {
        "id": "900000120004",
        "name": "Warschauer Strasse"
    },
    "S Wartenberg": {
        "id": "900000151001",
        "name": "Wartenberg"
    },
    "S+U Wedding": {
        "id": "900000009104",
        "name": "Wedding"
    },
    "S Westend": {
        "id": "900000026207",
        "name": "Westend"
    },
    "S+U Westhafen": {
        "id": "900000001201",
        "name": "Westhafen"
    },
    "S Westkreuz": {
        "id": "900000024102",
        "name": "Westkreuz"
    },
    "S Wilhelmsruh": {
        "id": "900000084101",
        "name": "Wilhelmsruh"
    },
    "S Wollankstraße": {
        "id": "900000130003",
        "name": "Wollankstrasse"
    },
    "U Weberwiese": {
        "id": "900000120025",
        "name": "Weberwiese"
    },
    "U Wittenbergplatz": {
        "id": "900000056101",
        "name": "Wittenbergplatz"
    },
    "S+U Yorckstraße": {
        "id": "900000057103",
        "name": "Yorckstraße"
    },
    "S Zehlendorf": {
        "id": "900000049201",
        "name": "Zehlendorf"
    },
    "S+U Zoologischer Garten": {
        "id": "900000023201",
        "name": "Zoologischer Garten"
    },
    "U Zitadelle": {
        "id": "900000033101",
        "name": "Zitadelle"
    },
    "U Haselhorst": {
        "id": "900000034102",
        "name": "Haselhorst"
    },
    "U Paulsternstraße": {
        "id": "900000034101",
        "name": "Paulsternstrasse"
    },
    "U Rohrdamm": {
        "id": "900000036101",
        "name": "Rohrdamm"
    },
    "U Siemensdamm": {
        "id": "900000035101",
        "name": "Siemensdamm"
    },
    "U Halemweg": {
        "id": "900000018102",
        "name": "Halemweg"
    },
    "U Mierendorffplatz": {
        "id": "900000019204",
        "name": "Mierendorffplatz"
    },
    "U Richard-Wagner-Platz": {
        "id": "900000022202",
        "name": "Richard Wagner Platz"
    },
    "U Bismarckstraße": {
        "id": "900000024201",
        "name": "Bismarckstrasse"
    },
    "U Wilmersdorfer Straße": {
        "id": "900000024202",
        "name": "Wilmersdorfer Strasse"
    },
    "U Fehrbelliner Platz": {
        "id": "900000041101",
        "name": "Fehrbelliner Platz"
    },
    "U Blissestraße": {
        "id": "900000041102",
        "name": "Blissestrasse"
    },
    "U Berliner Straße": {
        "id": "900000044201",
        "name": "Berliner Strasse"
    },
    "U Bayerischer Platz": {
        "id": "900000055102",
        "name": "Bayerischer Platz"
    },
    "U Eisenacher Straße": {
        "id": "900000054103",
        "name": "Eisenacher Strasse"
    },
    "U Kleistpark": {
        "id": "900000054102",
        "name": "Kleistpark"
    },
    "U Möckernbrücke": {
        "id": "900000017104",
        "name": "Mockernbrucke"
    },
    "U Mehringdamm": {
        "id": "900000017101",
        "name": "Mehringdamm"
    },
    "U Gneisenaustraße": {
        "id": "900000016101",
        "name": "Gneisenaustr"
    },
    "U Südstern": {
        "id": "900000016202",
        "name": "Sudstern"
    },
    "U Karl-Marx-Straße": {
        "id": "900000078103",
        "name": "Karl Marx Strasse"
    },
    "U Grenzallee": {
        "id": "900000080202",
        "name": "Grenzallee"
    },
    "U Parchimer Allee": {
        "id": "900000080401",
        "name": "Parchimer Allee"
    },
    "U Britz-Süd": {
        "id": "900000080402",
        "name": "Britz Sud"
    },
    "U Johannisthaler Chaussee": {
        "id": "900000082202",
        "name": "Johannisthaler Chaussee"
    },
    "U Lipschitzallee": {
        "id": "900000082201",
        "name": "Lipschitzallee"
    },
    "U Wutzkyallee": {
        "id": "900000083102",
        "name": "Wutzkyallee"
    },
    "U Zwickauer Damm": {
        "id": "900000083101",
        "name": "Zwickauer Damm"
    },
    "U Rudow": {
        "id": "900000083201",
        "name": "Rudow"
    },
    "U Hansaplatz": {
        "id": "900000003101",
        "name": "Hansaplatz"
    },
    "S Blankenburg": {
        "id": "900000142001",
        "name": "Blankenburg"
    },
    "S Tegel": {
        "id": "900000089303",
        "name": "Tegel"
    },
    "U Alt-Tegel": {
        "id": "900000089301",
        "name": "Alt Tegel"
    },
    "S Attilastraße": {
        "id": "900000068301",
        "name": "Attilastrasse"
    },
    "U Alt-Tempelhof": {
        "id": "900000068202",
        "name": "Alt Tempelhof"
    },
    "U Kurfürstenstraße": {
        "id": "900000005201",
        "name": "Kurfurstenstrasse"
    },
    "U Kurfürstendamm": {
        "id": "900000023203",
        "name": "Kurfurstendamm"
    },
    "U Gleisdreieck": {
        "id": "900000017103",
        "name": "Gleisdreieck"
    },
    "U Prinzenstraße": {
        "id": "900000013103",
        "name": "Prinzenstrasse"
    },
    "U Kottbusser Tor": {
        "id": "900000013102",
        "name": "Kottbusser Tor"
    },
    "U Schlesisches Tor": {
        "id": "900000014102",
        "name": "Schlesisches Tor"
    },
    "S Oberspree": {
        "id": "900000192002",
        "name": "Oberspree"
    },
    "S Spindlersfeld": {
        "id": "900000180003",
        "name": "Spindlersfeld"
    },
    "U Vinetastraße": {
        "id": "900000130011",
        "name": "Vinetastrasse"
    },
    "U Senefelderplatz": {
        "id": "900000110005",
        "name": "Senefelderplatz"
    }
    ,
    "U Rosa-Luxemburg-Platz": {
        "id": "900000100016",
        "name": "Rosa Luxemburg Platz"
    },
    "U Hausvogteiplatz": {
        "id": "900000100012",
        "name": "Hausvogteiplatz"
    },
    "U Stadtmitte": {
        "id": "900000100011",
        "name": "Stadtmitte"
    },
    "U Französische Straße": {
        "id": "900000100027",
        "name": "Franzosische Strasse"
    },
    "U Mendelssohn-Bartholdy-Park": {
        "id": "900000005252",
        "name": "Mendelssohn Bartholdy Park"
    },
    "U Ernst-Reuter-Platz": {
        "id": "900000023101",
        "name": "Ernst Reuter Platz"
    },
    "U Deutsche Oper": {
        "id": "900000022201",
        "name": "Deutsche Oper"
    },
    "U Sophie-Charlotte-Platz": {
        "id": "900000022101",
        "name": "Sophie Charlotte Platz"
    },
    "U Kaiserdamm": {
        "id": "900000026202",
        "name": "Kaiserdamm"
    },
    "U Theodor-Heuss-Platz": {
        "id": "900000026201",
        "name": "Theodor Heuss Platz"
    },
    "U Neu-Westend": {
        "id": "900000026101",
        "name": "Neu Westend"
    },
    "U Ruhleben": {
        "id": "900000025202",
        "name": "Ruhleben"
    },
    "U Onkel Toms Hütte": {
        "id": "900000050282",
        "name": "Onkel Toms Hutte"
    },
    "U Freie Universität (Thielplatz)": {
        "id": "900000051201",
        "name": "Freie Universitat (Thielplatz)"
    },
    "U Podbielskiallee": {
        "id": "900000051302",
        "name": "Podbielskiallee"
    },
    "U Breitenbachplatz": {
        "id": "900000051202",
        "name": "Breitenbachplatz"
    },
    "U Rüdesheimer Platz": {
        "id": "900000045101",
        "name": "Rudesheimer Platz"
    },
    "U Spichernstraße": {
        "id": "900000042101",
        "name": "Spichernstrasse"
    },
    "U Augsburger Straße": {
        "id": "900000023202",
        "name": "Augsburger Strasse"
    },
    "U Viktoria-Luise-Platz": {
        "id": "900000055101",
        "name": "Viktoria Luise Platz"
    },
    "U Schillingstraße": {
        "id": "900000100017",
        "name": "Schillingstrasse"
    },
    "U Frankfurter Tor": {
        "id": "900000120008",
        "name": "Frankfurter Tor"
    },
    "U Samariterstraße": {
        "id": "900000120009",
        "name": "Samariterstrasse"
    },
    "U Magdalenenstraße": {
        "id": "900000160005",
        "name": "Magdalenenstrasse"
    },
    "U Friedrichsfelde": {
        "id": "900000161512",
        "name": "Friedrichsfelde"
    },
    "U Biesdorf-Süd": {
        "id": "900000171005",
        "name": "Biesdorf Sud"
    },
    "U Borsigwerke": {
        "id": "900000088202",
        "name": "Borsigwerke"
    },
    "U Holzhauser Straße": {
        "id": "900000088201",
        "name": "Holzhauser Strasse"
    },
    "U Otisstraße": {
        "id": "900000086101",
        "name": "Otisstrasse"
    },
    "U Kurt-Schumacher-Platz": {
        "id": "900000086102",
        "name": "Kurt Schumacher Platz"
    },
    "U Afrikanische Straße": {
        "id": "900000011102",
        "name": "Afrikanische Strasse"
    },
    "U Rehberge": {
        "id": "900000011101",
        "name": "Rehberge"
    },
    "U Seestraße": {
        "id": "900000009103",
        "name": "Seestrasse"
    },
    "U Leopoldplatz": {
        "id": "900000009102",
        "name": "Leopoldplatz"
    },
    "U Reinickendorfer Straße": {
        "id": "900000008102",
        "name": "Reinickendorfer Strasse"
    },
    "U Schwartzkopffstraße": {
        "id": "900000100501",
        "name": "Schwartzkopffstrasse"
    },
    "U Naturkundemuseum": {
        "id": "900000100009",
        "name": "Naturkundemuseum"
    },
    "U Kochstraße/Checkpoint Charlie": {
        "id": "900000012102",
        "name": "Kochstrasse"
    },
    "U Checkpoint Charlie/Kochstraße": {
        "id": "900000012102",
        "name": "Checkpoint Charlie"
    },
    "U Platz der Luftbrücke": {
        "id": "900000017102",
        "name": "Platz der Luftbrucke"
    },
    "U Paradestraße": {
        "id": "900000068101",
        "name": "Paradestrasse"
    },
    "U Kaiserin-Augusta-Straße": {
        "id": "900000068302",
        "name": "Kaiserin Augusta Strasse"
    },
    "U Ullsteinstraße": {
        "id": "900000069271",
        "name": "Ullsteinstrasse"
    },
    "U Westphalweg": {
        "id": "900000070101",
        "name": "Westphalweg"
    },
    "U Alt-Mariendorf": {
        "id": "900000070301",
        "name": "Alt Mariendorf"
    },
    "U Lindauer Allee": {
        "id": "900000086160",
        "name": "Lindauer Allee"
    },
    "U Franz-Neumann-Platz": {
        "id": "900000085202",
        "name": "Franz Neumann Platz"
    },
    "U Osloer Straße": {
        "id": "900000009202",
        "name": "Osloer Strasse"
    },
    "U Pankstraße": {
        "id": "900000009203",
        "name": "Pankstrasse"
    },
    "U Voltastraße": {
        "id": "900000007103",
        "name": "Voltastrasse"
    },
    "U Bernauer Straße": {
        "id": "900000007110",
        "name": "Bernauer Strasse"
    },
    "U Rosenthaler Platz": {
        "id": "900000100023",
        "name": "Rosenthaler Platz"
    },
    "U Weinmeisterstraße": {
        "id": "900000100051",
        "name": "Weinmeisterstrasse"
    },
    "U Heinrich-Heine-Straße": {
        "id": "900000100008",
        "name": "Heinrich Heine Strasse"
    },
    "U Moritzplatz": {
        "id": "900000013101",
        "name": "Moritzplatz"
    },
    "U Schönleinstraße": {
        "id": "900000016201",
        "name": "Schönleinstrasse"
    },
    "U Boddinstraße": {
        "id": "900000079202",
        "name": "Boddinstrasse"
    },
    "U Nauener Platz": {
        "id": "900000009201",
        "name": "Nauener Platz"
    },
    "U Amrumer Straße": {
        "id": "900000009101",
        "name": "Amrumer Strasse"
    },
    "U Birkenstraße": {
        "id": "900000002201",
        "name": "Birkenstrasse"
    },
    "U Turmstraße": {
        "id": "900000003104",
        "name": "Turmstrasse"
    },
    "U Güntzelstraße": {
        "id": "900000043201",
        "name": "Guntzelstrasse"
    },
    "U Friedrich-Wilhelm-Platz": {
        "id": "900000061102",
        "name": "Friedrich Wilhelm Platz"
    },
    "U Walther-Schreiber-Platz": {
        "id": "900000061101",
        "name": "Walther Schreiber Platz"
    },
    "U Schloßstraße": {
        "id": "900000062203",
        "name": "Schlossstrasse"
    },
    "U Bundestag": {
        "id": "900000003254",
        "name": "Bundestag"
    },
    "U Altstadt Spandau": {
        "id": "900000029301",
        "name": "Altstadt Spandau"
    },
    "U Jakob-Kaiser-Platz": {
        "id": "900000018101",
        "name": "Jakob-Kaiser-Platz"
    },
    "U Hohenzollernplatz": {
        "id": "900000043101",
        "name": "Hohenzollernplatz"
    }
};



var submit = $('#submit');
var origin = $('#origin');
var destination = $('#destination');
var originResults = $('#origin-results');
var destinationResults = $('#destination-results');
var svg = $('svg');
var originContainer = $('.origin-container');
var destinationContainer = $('.destination-container');
var singleResult = $('.singleresult');
var timetableInformation = $('.timetable-information');
var pathEls = document.querySelectorAll('path');
var hiddenPaths = $('.ind');
var lightsButton = $('#lightsonoff');
var mapOutline = $('.whitebackground');
var lightsOff = true;


clickOutOfResults(origin, originResults);
clickOutOfResults(destination, destinationResults);
incrementalSearcher(origin, originResults);
incrementalSearcher(destination, destinationResults);
highlightResults(originResults);
highlightResults(destinationResults);
resultsClick(origin, originResults);
resultsClick(destination, destinationResults);
keyDownActivity(origin, originResults);
keyDownActivity(destination, destinationResults);




//Intro animation
for (var i = 0; i < pathEls.length; i++) {
    var pathEl = pathEls[i];
    var offset = anime.setDashoffset(pathEl);
    pathEl.setAttribute('stroke-dashoffset', offset);
    var intro = anime({
        targets: pathEl,
        strokeDashoffset: [offset, 10],
        duration: anime.random(6000, 10000),
         delay: anime.random(100, 1000),
        loop: false,
        direction: 'alternate',
        easing: 'easeInOutSine',
        autoplay: true
    });
}

//On map click, hide individual coloured lines
svg.on('click', function() {
    hiddenPaths.addClass('hide');
});

// 'Lights' button, swapping background and outline colours.
lightsButton.on('click', function() {
    if (lightsOff) {
        $('body, html').css('background-color', 'white');
        mapOutline.css('stroke', '#000000');
        originContainer.css('color', '#000000');
        destinationContainer.css('color', '#000000');
        hiddenPaths.removeClass('hide');

        for (var i = 0; i < pathEls.length; i++) {
            var pathEl = pathEls[i];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute('stroke-dashoffset', offset);

            var intro = anime({
                targets: pathEl,
                strokeDashoffset: [offset, 0],
                duration: anime.random(1000, 2000),
                delay: anime.random(0, 1000),
                loop: false,
                direction: 'alternate',
                easing: 'easeInOutSine',
                autoplay: true
            });
        }
        lightsOff = false;

    } else {
        hiddenPaths.removeClass('hide');
        $('body, html').css('background-color', '#242426');
        mapOutline.css('stroke', '#ffffff');
        originContainer.css('color', '#ffffff');
        destinationContainer.css('color', '#ffffff');

        for (var k = 0; k < pathEls.length; k++) {

            var pathEl = pathEls[k];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute('stroke-dashoffset', offset);


            var intro = anime({
                targets: pathEl,
                strokeDashoffset: [offset, 0],
                duration: anime.random(1000, 2000),
                delay: anime.random(0, 1000),
                loop: false,
                direction: 'alternate',
                easing: 'easeInOutSine',
                autoplay: true
            });
        }
        lightsOff = true;
    }
});



function incrementalSearcher (inputField, inputFieldResults) {
    inputField.on('input', function(e) {
        var val = e.target.value;
        val = val.replace(/ü/gi, 'u');
        val = val.replace(/ö/gi, 'o');
        val = val.replace(/ä/gi, 'a');
        val = val.replace(/ß/gi, 'ss');
        val = val.replace(/-/gi, ' ');

        if(!e.target.value) {
            inputFieldResults.empty();
            return;
        }
        var matches = [];
        for( var key in stations) {
            if(stations[key].name.toLowerCase().indexOf(val.toLowerCase()) == 0) {
                matches.push(key);
                if(matches.length >= 5) {
                    break;
                }
            } else {
                inputFieldResults.html('No results');
            }

        }
        var result = '';
        for (var i = 0; i < matches.length; i++) {
            result += '<div class="' + inputField.attr('name') + ' ' + 'singleresult">' + matches[i] + '</div>';
        }
        inputFieldResults.html(result).removeClass('hidden');
    });
}
//When clicking outside of input, empty fields.
function clickOutOfResults(inputField, inputFieldResults) {
    inputField.on('blur', function() {
        inputFieldResults.empty();
    });
}

function highlightResults (inputFieldResults) {
    inputFieldResults.on('mouseover', function(e) {
        $('.highlight').removeClass('highlight');
        $(e.target).addClass('highlight');
    });
}
function resultsClick (inputField, inputFieldResults) {
    inputFieldResults.on('mousedown', function(e) {
        inputField.val($(e.target).html());
        inputFieldResults.addClass('hidden');
    });
}
//Add arrow key functionality
function keyDownActivity(inputField, inputFieldResults) {
    inputField.on('keydown', function(e) {
        singleResult = $('.singleresult');

        for (var i = 0; i < singleResult.length; i++) {
            if($(singleResult[i]).hasClass('highlight')) {
                break;
            }
        }
        singleResult.removeClass('highlight');
        if(e.which == 38) {
            if (i > 0) {
                singleResult.eq(i-1).addClass('highlight');
            }
        } else if (e.which == 40) {
            if(i < singleResult.length-1) {
                singleResult.eq(i+1).addClass('highlight');
            }
            if(i == singleResult.length) {
                singleResult.first().addClass('highlight');
            }
        }
        if(e.which == 13) {
            inputField.val(singleResult.eq(i).html());
            inputFieldResults.empty();
        }
    });
}


submit.on('click', function() {
    var searchOrigin;
    var searchDestination;
    for( var key in stations) {
        if (key == origin.val()) {
            searchOrigin = stations[key].id;
        }
        if(key == destination.val()) {
            searchDestination = stations[key].id;
        }
    }

    //Easter egg
    if(destination.val().toLowerCase() == 'the party') {
        hiddenPaths.removeClass('hide');
        for (var i = 0; i < pathEls.length; i++) {
            var randomColor = '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
            pathEls[i].setAttribute('style', 'fill:' + randomColor);
            var pathEl = pathEls[i];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute('stroke-dashoffset', offset);
            anime({
                targets: pathEl,
                strokeDashoffset: [offset, 0],
                duration: anime.random(1000, 3000),
                delay: anime.random(0, 2000),
                loop: true,
                direction: 'alternate',
                easing: 'easeInOutSine',
                autoplay: true
            });
            callSetTimeout();

        }
        function callSetTimeout() {
            setTimeout(function() {
                var randomColor = '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
                var first = true;
                if(first) {
                    for (var i = 0; i < pathEls.length; i++) {
                        pathEls[i].setAttribute('style', 'stroke:' + randomColor);
                        first = false;
                    }
                }else {
                    for (var i = 0; i < pathEls.length; i++) {
                        pathEls[i].setAttribute('style', 'fill:' + randomColor);
                        first = true;
                    }
                }
                callSetTimeout();
            }, 200);
        }

        //Normal functionality, ajax call to retrive data
    } else {
        $.ajax({
            url: 'https://2.vbb.transport.rest/journeys?from=' + searchOrigin + '&to=' + searchDestination + '&tram=false&bus=false&express=false&regional=false',
            headers: {
            },
            success: function(data) {
                var departure = [];
                var departureHtml = '';

                //Organise data retreived from API. Departure information is available for the next 5 trains, and each train may have several different legs (or stops).
                for (var i = 0; i < data.length; i++) {
                    departure.push({departure: data[i].departure, legs: data[i].legs});
                }

                //Check if train is cancelled, otherwise make time and date more readable
                for (var d = 0; d < departure.length; d++) {
                    if(departure[d].departure == null) {
                        departure[d].departure = 'Cancelled';
                    } else {
                        departure[d].departure = new Date(departure[d].departure).toLocaleTimeString();
                        departure[d].departure = departure[d].departure.slice(0, -3);
                    }
                }

                //Create custom object containing all relevant journey information to be used for the animation function. Data pulled from API.
                var allLegInformation = {
                };

                //Loop through departure, creating html divs containing each journey, including all leg information to include as text information on the side.
                for (var q = 0; q < departure.length; q++) {
                    departureHtml +='<div class="departure-times ' + [q] + '" data-myval="' + [q] +  '">' + departure[q].departure + '</div>';
                    allLegInformation["journey" + q] = [];
                    departureHtml += '<div class="leg-times-container hidden">';
                    for (var l = 0; l < departure[q].legs.length; l++) {
                        var trainLine;
                        var oneLeg = departure[q].legs[l];
                        if(departure[q] != null) {
                            if(oneLeg.mode) {
                                trainLine = "Walking";
                            } else {
                                trainLine = oneLeg.line.name;
                            }


                            oneLeg.departure = new Date(oneLeg.departure).toLocaleTimeString();
                            oneLeg.departure = oneLeg.departure.slice(0, -3);
                            oneLeg.arrival = new Date(oneLeg.arrival).toLocaleTimeString();
                            oneLeg.arrival = oneLeg.arrival.slice(0, -3);
                            departureHtml +='<div class="leg-times">From ' + oneLeg.origin.name + ' (' + oneLeg.departure + ') on the ' + trainLine + '<br>To ' + oneLeg.destination.name + ' (' + oneLeg.arrival + ')</div>';

                            allLegInformation["journey" + q].push({origin: oneLeg.origin.name, line: trainLine, destination: oneLeg.destination.name, direction: oneLeg.direction});

                        }
                    }
                    departureHtml += '</div>';
                }
                timetableInformation.html(departureHtml);
                //Animate first departure
                makeThemLinesMove(allLegInformation, 0);

                //When clicking on journey information on the side, show all relevant information, displayed in a random colour, and calls function to animate all legs
                var clicked = false;
                $(".departure-times").on('click', function() {
                    var randomColor = '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
                    if($(this).next().hasClass('hidden')) {
                        $(this).next().removeClass('hidden');
                        $(this).next().css('color', randomColor);
                        clicked = false;
                        makeThemLinesMove(allLegInformation, $(this).attr('data-myval'));
                    } else {
                        $(this).next().addClass('hidden');
                        clicked = true;
                    }
                });
            }
        });
    }
});
//



//Animation function
function makeThemLinesMove(allTravelInformation, journeyNumber) {
    //hide all coloured line to begin with
    for (var h = 0; h < hiddenPaths.length; h++) {
        hiddenPaths[h].classList.add('hide');
    }
    //Find current information to be passed to first function.
    var currentJourney = allTravelInformation["journey" + journeyNumber];


    //Retrives results from the set of functions and animates the returned lines.
    var allMatchingLines = findMatchingTrainLines(currentJourney);

    for (var i = 0; i < allMatchingLines.length; i++) {
        var animateLine = allMatchingLines[i].path[0];
        animateLine.classList.remove('hide');
        var offset = anime.setDashoffset(animateLine);
        animateLine.setAttribute('stroke-dashoffset', offset);
        anime({
            targets: animateLine,
            strokeDashoffset: [offset, 0],
            duration: anime.random(3000, 5000),
            delay: anime.random(0, 1000),
            loop: false,
            direction: 'alternate',
            easing: 'easeInOutSine',
            autoplay: true
        });
    }
}

function findMatchingTrainLines(currentJourney) {
    var allMatchingLines = [];
    //Try to match the current journeys train lines against object containing all station lines found in '/public/js/stationlines.js'
    for (var i = 0; i < currentJourney.length; i++) {
        for (var key in allStationLines) {
            if (allStationLines.hasOwnProperty(key)) {

                //If the lines are a match, pass the current leg and the line to the next function. This will be repeated for all legs of the current journey.
                if(currentJourney[i].line == key) {
                    var activeLines = allStationLines[key];
                    var matchingLines = organiseByDirection(currentJourney[i], activeLines);
                    //As this is being done for each leg of the journey, results will need to be looped through and then returned as an array of results.
                    for (var k = 0; k < matchingLines.length; k++) {
                        allMatchingLines.push(matchingLines[k]);
                    }
                }
            }
        }
    }
    return allMatchingLines;
}

//Loop through active lines, sorting out only the correct lines WITH the correct direction and then pass them onto next function.
function organiseByDirection(currentJourney, activeLines) {
    var matchingLinesWithCorrectDirection = [];
    for (var keykey in activeLines) {
        if (activeLines.hasOwnProperty(keykey)) {
            if (currentJourney.direction == activeLines[keykey].direction) {
                matchingLinesWithCorrectDirection.push(activeLines[keykey]);
            }
        }
    }
    var allMatchingLines = findDepartureStops(currentJourney, matchingLinesWithCorrectDirection);
    return allMatchingLines;
}


function findDepartureStops(currentJourney, activeLines) {
    //Find origin index point inside array and then remove all stations that precede it.
    var idx = activeLines.findIndex(function(item) {
        return item.name == currentJourney.origin;
    });
    var findStartStation = activeLines.slice(idx);

    //Do the same for the destination.
    var index = findStartStation.findIndex(function(item) {
        return item.name == currentJourney.destination;

    });
    var allMatchingLines = findStartStation.slice(0, index);
    //Return all matchingLines, ready for animation!
    return allMatchingLines;
}
